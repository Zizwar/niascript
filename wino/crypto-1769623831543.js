#!/usr/bin/env node
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ğŸ¤– ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨ÙˆØ§Ø³Ø·Ø© NiaScript Agents
// ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®: 2026-01-28T18:10:35.104Z
// ğŸ“ Ø§Ù„Ù†ÙŠØ©: Ø³ÙƒØ±ÙŠØ¨Øª ÙŠØ¬Ù„Ø¨ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¨ÙŠØªÙƒÙˆÙŠÙ† ÙˆØ§Ù„Ø¥ÙŠØ«ÙŠØ±ÙŠÙˆÙ… Ù…Ù† CoinGecko API ÙˆÙŠØ­Ø³Ø¨ Ø§Ù„Ù‡ÙˆÙ„Ø¯ 5 Ø³Ù†ÙˆØ§Øª ÙˆÙŠØ¹Ø·ÙŠ ØªÙˆØµÙŠØ§Øª...
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

{
  "code": "```javascript\nimport 'dotenv/config';\nimport axios from 'axios';\nimport { writeFile } from 'node:fs/promises';\nimport { fileURLToPath } from 'node:url';\n\nconst OUTPUT_FILE = process.env.OUTPUT_FILE ?? 'results.json';\nconst COINGECKO_BASE_URL = 'https://api.coingecko.com/api/v3';\nconst TARGET_COINS = [\n  { id: 'bitcoin', symbol: 'BTC' },\n  { id: 'ethereum', symbol: 'ETH' },\n];\n\n/**\n * Format a Date object into dd-mm-yyyy required by CoinGecko history endpoint.\n * @param {Date} date\n * @returns {string}\n */\nfunction formatDateForCoinGecko(date) {\n  const day = String(date.getDate()).padStart(2, '0');\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const year = date.getFullYear();\n  return `${day}-${month}-${year}`;\n}\n\n/**\n * Fetches the latest USD price for a given coin ID from CoinGecko.\n * @param {string} coinId\n * @returns {Promise<number>}\n */\nasync function fetchCurrentPrice(coinId) {\n  console.log(`ğŸ” Fetching current price for ${coinId}`);\n  try {\n    const response = await axios.get(`${COINGECKO_BASE_URL}/simple/price`, {\n      params: { ids: coinId, vs_currencies: 'usd' },\n      timeout: 10_000,\n    });\n    const price = response.data?.[coinId]?.usd;\n    if (typeof price !== 'number') {\n      throw new Error('Invalid payload from CoinGecko current price endpoint.');\n    }\n    console.log(`âœ… Retrieved current price for ${coinId}: $${price.toLocaleString()}`);\n    return price;\n  } catch (error) {\n    console.error(`âŒ Failed to fetch current price for ${coinId}:`, error.message);\n    throw new Error(`Current price fetch error for ${coinId}: ${error.message}`);\n  }\n}\n\n/**\n * Fetches historical USD price for a coin at a given date from CoinGecko.\n * @param {string} coinId\n * @param {string} formattedDate\n * @returns {Promise<number>}\n */\nasync function fetchHistoricalPrice(coinId, formattedDate) {\n  console.log(`ğŸ” Fetching historical price for ${coinId} on ${formattedDate}`);\n  try {\n    const response = await axios.get(`${COINGECKO_BASE_URL}/coins/${coinId}/history`, {\n      params: { date: formattedDate, localization: 'false' },\n      timeout: 10_000,\n    });\n    const price = response.data?.market_data?.current_price?.usd;\n    if (typeof price !== 'number') {\n      throw new Error('Invalid payload from CoinGecko historical endpoint.');\n    }\n    console.log(`âœ… Retrieved historical price for ${coinId}: $${price.toLocaleString()}`);\n    return price;\n  } catch (error) {\n    console.error(`âŒ Failed to fetch historical price for ${coinId}:`, error.message);\n    throw new Error(`Historical price fetch error for ${coinId}: ${error.message}`);\n  }\n}\n\n/**\n * Computes ROI percentage between current and historical prices.\n * @param {number} current\n * @param {number} historical\n * @returns {number}\n */\nfunction computeRoi(current, historical) {\n  if (historical === 0) {\n    return 0;\n  }\n  return ((current - historical) / historical) * 100;\n}\n\n/**\n * Builds a simple recommendation based on ROI.\n * @param {number} roi\n * @returns {string}\n */\nfunction buildRecommendation(roi) {\n  if (roi >= 50) {\n    return 'Strong growth over 5 years â€“ consider holding for future gains.';\n  }\n  if (roi > 0) {\n    return 'Positive growth â€“ consider continuing to hold or dollar-cost average.';\n  }\n  return 'Performance has been flat or negative â€“ review your risk tolerance before holding.';\n}\n\n/**\n * Main execution function aggregating coin data and persisting results.\n * @returns {Promise<void>}\n */\nexport async function runHoldAnalyzer() {\n  console.log('ğŸš€ Starting the 5-year crypto hold analyzer script.');\n\n  const fiveYearsAgo = new Date();\n  fiveYearsAgo.setFullYear(fiveYearsAgo.getFullYear() - 5);\n  const formattedFiveYearDate = formatDateForCoinGecko(fiveYearsAgo);\n\n  console.log(`ğŸ“… Calculated reference date for 5-year hold: ${formattedFiveYearDate}`);\n\n  const coinPromises = TARGET_COINS.map(async (coin) => {\n    console.log(`\n----- Processing ${coin.symbol} (${coin.id}) -----`);\n    const [currentPrice, historicalPrice] = await Promise.all([\n      fetchCurrentPrice(coin.id),\n      fetchHistoricalPrice(coin.id, formattedFiveYearDate),\n    ]);\n\n    const roi = computeRoi(currentPrice, historicalPrice);\n    const recommendation = buildRecommendation(roi);\n\n    return {\n      id: coin.id,\n      symbol: coin.symbol,\n      currentPrice,\n      historicalPrice,\n      roiPercent: Number(roi.toFixed(2)),\n      recommendation,\n    };\n  });\n\n  try {\n    const coins = await Promise.all(coinPromises);\n\n    const results = {\n      timestamp: new Date().toISOString(),\n      fiveYearReferenceDate: formattedFiveYearDate,\n      coins,\n    };\n\n    console.log(`ğŸ’¾ Persisting results to ${OUTPUT_FILE}`);\n    await writeFile(OUTPUT_FILE, JSON.stringify(results, null, 2), { encoding: 'utf-8' });\n    console.log('âœ… Results saved successfully.');\n  } catch (error) {\n    console.error('âŒ Failed to complete the hold analysis:', error.message);\n    throw error;\n  }\n}\n\nconst currentScriptPath = fileURLToPath(import.meta.url);\n\nif (process.argv[1] === currentScriptPath) {\n  runHoldAnalyzer().catch((error) => {\n    console.error('ğŸ”¥ Script terminated with an error:', error.message);\n    process.exitCode = 1;\n  });\n}\n```",
  "language": "javascript",
  "explanation": "Ø³ÙƒØ±ÙŠØ¨Øª Node.js ÙŠØ³ØªØ®Ø¯Ù… CoinGecko API Ù„Ø¬Ù„Ø¨ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¨ÙŠØªÙƒÙˆÙŠÙ† ÙˆØ§Ù„Ø¥ÙŠØ«ÙŠØ±ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù‚Ø¨Ù„ ÙˆØ¨Ø¹Ø¯ Ø®Ù…Ø³Ø© Ø£Ø¹ÙˆØ§Ù…ØŒ ÙˆÙŠØ­Ø³Ø¨ Ø§Ù„Ø¹Ø§Ø¦Ø¯ ÙˆÙŠÙˆÙØ± ØªÙˆØµÙŠØ§Øª ÙˆÙŠØ­ÙØ¸ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙÙŠ Ù…Ù„Ù JSON.",
  "dependencies": [
    "axios",
    "dotenv"
  ],
  "usage": "node index.js"
}